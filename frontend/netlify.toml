# This is the master configuration file for your Netlify deployment.

[build]
  # Base directory: Explicitly tells Netlify to run all commands from the root of the repository.
  # This is a crucial setting for monorepos.
  base = "."

  # Publish directory: This is the folder that Netlify will make public after a successful build.
  publish = "build"

  # Build command: This is the explicit, step-by-step command Netlify will run.
  # 1. Installs frontend dependencies.
  # 2. Installs backend dependencies.
  # 3. Builds the React app, treating warnings as non-fatal.
  command = "npm install && npm install --prefix backend && CI=false npm run build"

[build.environment]
  # This forces Netlify to use a stable version of Node.js, preventing many common errors.
  NODE_VERSION = "18"
