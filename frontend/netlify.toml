# This is the master configuration file for your Netlify deployment.

[build]
  # Base directory: Tells Netlify to run commands from the root of the repository.
  base = "."

  # Publish directory: The folder that contains the final website after the build.
  publish = "build"

  # Build command: The explicit, step-by-step command Netlify will run.
  command = "npm install && npm install --prefix backend && CI=false npm run build"

[build.environment]
  # Forces Netlify to use a stable version of Node.js.
  NODE_VERSION = "18"

# --- NEW: Add this redirects rule at the end of the file ---
# This rule tells Netlify how to handle SPA routing.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

**What this new section does:**
* `[[redirects]]`: Declares a new redirect rule.
* `from = "/*"`: This means "for any URL path that is requested..."
* `to = "/index.html"`: "...serve the main `index.html` file instead."
* `status = 200`: This tells the browser that the request was successful (an "OK" status).



---

### **Step 2: Commit and Push This Final Change**

Now, you need to upload the updated configuration file to your GitHub repository. This will trigger the final build that fixes the routing.

1.  In your terminal, run the following commands from your project's root directory:
    ```sh
    git add netlify.toml
    ```

2.  Commit the change with a clear message:
    ```sh
    git commit -m "feat: Add SPA redirect rule to netlify.toml"
    ```

3.  Push to GitHub:
    ```sh
    git push
